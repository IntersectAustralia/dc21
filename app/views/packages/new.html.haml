- content_for :breadcrumb  do
  %h1 Data / New Package

.container
  -if current_user.data_files.empty?
    %h3 You cannot create a package because your cart is empty.
    .form-actions
      .actions-pre
        = cancel_button "Back", @back_request || data_files_path
  -else
    %h2 New Package
    = form_for(@package, :url => url_for(:controller => :packages, :action => :create), :html => {:multipart => true}) do |f|
      = render "shared/error_messages", :target => @package
      .control-group
        = label_tag :filename, "Filename", class: "control-label"
        .controls
          = required
          = text_field_tag :filename
          %t .zip
      .control-group
        = label_tag :experiment_id, "Experiment", class: "control-label"
        .controls
          = required
          = select_tag :experiment_id, option_groups_from_collection_for_select(grouped_experiments_for_select, :experiments, :name, :id, :name, @package.experiment_id), :include_blank => true
      .control-group
        = label_tag :description, "Description", class: "control-label"
        .controls
          = text_area_tag :description, @package.file_processing_description
      .control-group#tags
        = label_tag :tags, "Tags", class: "control-label"
        .controls
          - if tags.empty?
            .record None
          - tags.each do |tag|
            %label.checkbox
              = check_box_tag "tags[]", tag.id, @package.tag_ids.include?(tag.id), :id => "tag_#{tag.id}"
              = label_tag "tag_#{tag.id}", tag.name
      .form-actions
        .actions
          = cancel_button "Cancel", @back_request || data_files_path
          = f.submit "Save"


